<!DOCTYPE html>
<html lang="ja">
  <head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>出羽鯖 申請ページ</title>
    <style>
      body { font-family: 'Helvetica Neue', Arial, sans-serif; margin: 20px; line-height: 1.6; background-color: #f4f7f6; color: #333; }
      .container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

      /* タブメニュー */
      .tabs { display: flex; margin-bottom: 20px; }
      .tab {
        flex: 1;
        padding: 12px;
        text-align: center;
        cursor: pointer;
        background: #ecf0f1;
        border-radius: 4px 4px 0 0;
        font-weight: bold;
      }
      .tab.active { background: #2ecc71; color: white; }

      .tab-content { display: none; }
      .tab-content.active { display: block; }

      .notice { background-color: #fff3cd; border-left: 5px solid #ffca28; padding: 15px; margin-bottom: 20px; font-size: 0.9em; }
      .notice b { color: #856404; }

      h1 { color: #2c3e50; font-size: 1.5em; border-bottom: 2px solid #2ecc71; padding-bottom: 10px; margin-top: 0; }
      label { font-weight: bold; display: block; margin-top: 15px; }
      input, select { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; font-size: 16px; }

      button { width: 100%; margin-top: 25px; padding: 12px; cursor: pointer; background: #2ecc71; color: white; border: none; border-radius: 4px; font-weight: bold; font-size: 1em; transition: background 0.3s; }
      button:hover { background: #27ae60; }
      button:disabled { background: #ccc; cursor: not-allowed; }
    </style>
  </head>
  <body>
    <div class="container">

      <!-- タブメニュー -->
      <div class="tabs">
        <div class="tab active" data-tab="build">建築申請</div>
        <div class="tab" data-tab="rentcar">レンタカー申請</div>
      </div>

      <!-- 建築申請フォーム -->
      <div id="build" class="tab-content active">
        <h1>出羽鯖 建築申請フォーム</h1>

        <div class="notice">
          <b>【建築ルール】</b><br>
          当サーバーでは、<b>運営の許可待ちは必要ありません。</b><br>
          申請後すぐに建築を開始してOKです！
        </div>

        <form id="requestForm">
          <label>MCID</label>
          <input type="text" name="mcid" required>

          <label>建築の種類</label>
          <select name="type">
            <option value="建物">建物</option>
            <option value="道路">道路</option>
            <option value="その他">その他</option>
          </select>

          <label>用途</label>
          <input type="text" name="purpose" required>

          <label>中心座標</label>
          <input type="text" name="coords" required>

          <button type="submit" id="submitBtn">申請して建築を開始する</button>
        </form>
      </div>

      <!-- レンタカー申請フォーム -->
      <div id="rentcar" class="tab-content">
        <h1>出羽鯖 レンタカー申請</h1>

        <form id="rentForm">
          <label>MCID</label>
          <input type="text" name="mcid" required>

          <label>車種</label>
          <select name="car">
            <option value="軽トラ">軽トラ</option>
            <option value="スポーツカー">スポーツカー</option>
            <option value="バス">バス</option>
          </select>

          <label>料金（1日）</label>
          <select name="price">
            <option value="100">100円</option>
            <option value="200">200円</option>
            <option value="500">500円</option>
          </select>

          <button type="submit" id="rentBtn">レンタカーを借りる</button>
        </form>
      </div>

    </div>

    <script>
      const GAS_URL = "https://script.google.com/macros/s/AKfycbwsq8vd69zZf5FsTUxfa26PS7mB3n8jJEuRJ_Xck68XRZvExMIW3gRxxCDU7KLiyHKH/exec";

      /* タブ切り替え */
      document.querySelectorAll(".tab").forEach(tab => {
        tab.addEventListener("click", () => {
          document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
          document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));

          tab.classList.add("active");
          document.getElementById(tab.dataset.tab).classList.add("active");
        });
      });

      /* 建築申請 */
      const form = document.getElementById('requestForm');
      const btn = document.getElementById('submitBtn');

      form.addEventListener('submit', function(e) {
        e.preventDefault();

        btn.disabled = true;
        btn.innerText = "送信中...";

        const data = new URLSearchParams();
        data.append('mode', 'build');
        data.append('mcid', form.mcid.value.trim());
        data.append('type', form.type.value);
        data.append('purpose', form.purpose.value.trim());
        data.append('coords', form.coords.value.trim());

        fetch(GAS_URL, { method: 'POST', body: data })
        .then(() => {
          alert("建築申請が完了しました！");
          form.reset();
        })
        .finally(() => {
          btn.disabled = false;
          btn.innerText = "申請して建築を開始する";
        });
      });

      /* レンタカー申請 */
      const rentForm = document.getElementById('rentForm');
      const rentBtn = document.getElementById('rentBtn');

      rentForm.addEventListener('submit', function(e) {
        e.preventDefault();

        rentBtn.disabled = true;
        rentBtn.innerText = "送信中...";

        const data = new URLSearchParams();
        data.append('mode', 'rent');
        data.append('mcid', rentForm.mcid.value.trim());
        data.append('car', rentForm.car.value);
        data.append('price', rentForm.price.value);

        fetch(GAS_URL, { method: 'POST', body: data })
        .then(() => {
          alert("レンタカーを借りました！");
          rentForm.reset();
        })
        .finally(() => {
          rentBtn.disabled = false;
          rentBtn.innerText = "レンタカーを借りる";
        });
      });
    </script>
  </body>
</html>
